{% extends "base.html" %}

{% block nav_movies %}active{% endblock %}

{% block header %}
<h3>{{ title }}</h3>
{% endblock %}

{% block content %}
<div id="toolbar" class="form-row align-items-center justify-content-between mb-3">
  <!-- <button id="btnGetSelected" class="btn btn-secondary btn-sm">getSelections</button> -->
  <div class="col-auto">
    <label class="sr-only">Search</label>
    <input id="searchInput" type="text" class="form-control form-control-sm" placeholder="Search">
  </div>
  <div class="col-auto">
    <div class="input-group">
      <label class="sr-only">Sort by</label>
      <select id="sortFieldSelect" class="custom-select custom-select-sm" aria-label="Field to sort by">
        <option value="title" selected>Title</option>
        <option value="year">Year</option>
        <option value="relevance">Relevance</option>
      </select>
      <div class="input-group-append">
        <button id="sortOrderButton" class="btn btn-secondary btn-sm"><i class="fa fa-arrow-down"></i></button>
      </div>
    </div>
  </div>
</div>

<div class="row">
  {% for movie in movies.items %}
  <div class="col-sm-6 col-md-4 col-lg-3 mb-3">
    <div class="card shadow-sm h-100">
      <!-- <div class="row no-gutters h-100">
        <div class="col-6 col-sm-12"> -->
      <a href="{{ url_for('main.movie', id=movie.id) }}" class="">
        <img class="card-img-top img-opacity-hover w-100" src="{{ movie.default_image_url }}" alt="">
      </a>
      <!-- </div>
        <div class="col-6 col-sm-12"> -->
      <div class="card-body d-flex flex-column h-100 pt-2">
        <div>
          <small class="text-muted">{{ movie.category }} <span
              class="badge badge-secondary">{{ movie.certificate }}</span></small>
          <div class="card-title">
            <a href="{{ url_for('main.movie', id=movie.id) }}">{{ movie.title|truncate(44) }} ({{ movie.year }})</a>
          </div>
        </div>
        <div class="mt-auto d-flex justify-content-between align-items-center">
          <a href="#" class="btn btn-sm btn-outline-secondary" data-toggle="tooltip" data-placement="top"
            title="Add to watchlist"><i class="fa fa-plus"></i></a>
          <span><i class="fa fa-star" aria-hidden="true"></i> {{ movie.rating_value }}<small
              class="text-muted">/10</small></span>
        </div>
      </div>
      <!-- </div>
      </div> -->
    </div>
  </div>
  {% endfor %}
</div>

<nav aria-label="Pagination" class="d-flex flex-column flex-sm-row align-items-center justify-content-between">
  <div class="mb-2">Showing {{ (movies.page - 1) * movies.per_page + 1 }} to
    {{ movies.page * movies.per_page }} of {{ movies.total }}</div>
  <div class="">
    <ul class="pagination">
      {%if movies.prev_url %}
      <li class="page-item">
        <a class="page-link" href="{{ movies.first_url }}" aria-label="First"> &laquo; </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="{{ movies.prev_url }}" aria-label="Previous">&lsaquo;</a>
      </li>
      <li class="page-item"><a class="page-link" href="{{ movies.prev_url }}">{{ movies.prev_num }}</a></li>
      {% else %}
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">&lsaquo;</a>
      </li>
      {% endif %}
      <li class="page-item active" aria-current="page">
        <a class="page-link" href="#">{{ movies.page }} <span class="sr-only">(current)</span></a>
      </li>
      {% if movies.next_url %}
      <li class="page-item"><a class="page-link" href="{{ movies.next_url }}">{{ movies.next_num }}</a></li>
      <li class="page-item">
        <a class="page-link" href="{{ movies.next_url }}" aria-label="Next">&rsaquo;</a>
      </li>
      <li class="page-item">
        <a class="page-link" href="{{ movies.last_url }}" aria-label="Last">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
      {% else %}
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">&rsaquo;</a>
      </li>
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
      {% endif %}
    </ul>
  </div>
</nav>

{% endblock %}

{% block script %}
<script>
  $(function () {
    $('[data-toggle="tooltip"]').tooltip()
  })
</script>
{% endblock %}