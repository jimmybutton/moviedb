{% from 'bootstrap/pagination.html' import render_pagination %}

{% extends "base.html" %}

{% block nav_movies %}active{% endblock %}

{% block header %}
<h3>{{ title }}</h3>
<div class="d-flex align-items-center">
  <a href="{{ url_for('main.movie_create') }}" class="btn btn-primary ml-1">
    <i class="fa fa-plus-square" aria-hidden="true"></i>
    Create
  </a>
</div>
{% endblock %}

{% block content %}
<form class="form-inline mb-2" method="get" action="{{ url_for('main.movies') }}">
  <!-- <label class="sr-only" for="q">Search</label>
  <input id="q" type="text" class="form-control mb-2 mr-sm-2" placeholder="Search"> -->
  {{ search_form.q(size=20, class='form-control', placeholder=search_form.q.label.text) }}

  <!-- <label for="sort" class="mb-2 mr-sm-2">Sort by</label>
  <div class="input-group mb-2 mr-sm-2">
    <select id="sort" class="custom-select">
      <option value="score" selected>Search score</option>
      <option value="title">Title</option>
      <option value="year">Year</option>
    </select>
    <div class="input-group-append">
      <button id="sortOrderButton" class="btn btn-secondary"><i class="fa fa-arrow-down"></i></button>
    </div>
  </div>

  <input type="hidden" id="order" name="order" value="asc">
  <button type="submit" class="btn btn-primary mb-2">Search</button> -->
</form>

<div class="row">
  {% for movie in movies.items %}
  <div class="col-sm-6 col-md-4 col-lg-3 mb-3">
    <div class="card shadow-sm h-100">
      <!-- <div class="row no-gutters h-100">
        <div class="col-6 col-sm-12"> -->
      <a href="{{ url_for('main.movie', id=movie.id) }}" class="">
        <img class="card-img-top img-opacity-hover w-100" src="{{ movie.default_image_url }}" alt="">
      </a>
      <!-- </div>
        <div class="col-6 col-sm-12"> -->
      <div class="card-body d-flex flex-column h-100 pt-2">
        <div>
          <small class="text-muted">{{ movie.category }} <span
              class="badge badge-secondary">{{ movie.certificate }}</span></small>
          <div class="card-title">
            <a href="{{ url_for('main.movie', id=movie.id) }}">{{ movie.title|truncate(44) }} ({{ movie.year }})</a>
          </div>
        </div>
        <div class="mt-auto d-flex justify-content-between align-items-center">
          <a href="#" class="btn btn-sm btn-outline-secondary" data-toggle="tooltip" data-placement="top"
            title="Add to watchlist"><i class="fa fa-plus"></i></a>
          <span><i class="fa fa-star" aria-hidden="true"></i> {{ movie.rating_value }}<small
              class="text-muted">/10</small></span>
        </div>
      </div>
      <!-- </div>
      </div> -->
    </div>
  </div>
  {% endfor %}
</div>

{{ render_pagination(movies) }}

{% endblock %}

{% block script %}
<script>
  $(function () {
    $('[data-toggle="tooltip"]').tooltip()
  })
</script>
{% endblock %}